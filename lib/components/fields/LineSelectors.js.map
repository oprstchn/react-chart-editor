{"version":3,"sources":["../../../src/components/fields/LineSelectors.js"],"names":["styledRenderer","label","strokeDashes","value","strokeDasharray","strokeShapes","d","strokeStyle","fill","strokeWidth","computeOptions","strokeData","stroke","map","MULTI_VALUED","COLORS","mutedBlue","LineShapeSelector","props","bind","LineDashSelector","lineColor","concat","LineSelector","context","setLocals","nextProps","nextContext","fullContainer","get","options","Component","propTypes","PropTypes","func","Dropdown","defaultProps","clearable","contextTypes","object"],"mappings":"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","file":"LineSelectors.js","sourcesContent":["import Dropdown from './Dropdown';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport nestedProperty from 'plotly.js/src/lib/nested_property';\nimport {tooLight} from 'lib';\nimport {COLORS, MULTI_VALUED} from 'lib/constants';\n\n/* eslint-disable react/prop-types */\nconst styledRenderer = ({label}) => {\n  return (\n    <div>\n      <svg width=\"100\" height=\"16\">\n        <g>{label}</g>\n      </svg>\n    </div>\n  );\n};\n/* eslint-enable react/prop-types */\n\nconst strokeDashes = [\n  {value: 'solid', strokeDasharray: ''},\n  {value: 'dot', strokeDasharray: '3px, 3px'},\n  {value: 'dash', strokeDasharray: '9px, 9px'},\n  {value: 'longdash', strokeDasharray: '15px, 15px'},\n  {value: 'dashdot', strokeDasharray: '9px, 3px, 3px, 3px'},\n  {value: 'longdashdot', strokeDasharray: '15px, 6px, 3px, 6px'},\n];\n\nconst strokeShapes = [\n  {d: 'M2,14L14,2', value: 'linear'},\n  {d: 'M2,14C4,4 16,16 18,2', value: 'spline'},\n  {d: 'M2,14H14V2', value: 'hv'},\n  {d: 'M2,14V2H14', value: 'vh'},\n  {d: 'M2,14H8V2H14', value: 'hvh'},\n  {d: 'M2,14V8H14V2', value: 'vhv'},\n];\n\nconst strokeStyle = {fill: 'none', strokeWidth: '4px'};\n\nconst computeOptions = (strokeData, stroke) =>\n  strokeData.map(({value, strokeDasharray, d = 'M0,8h100'}) => ({\n    label: (\n      <path\n        d={d}\n        style={{\n          ...strokeStyle,\n          stroke: !stroke || stroke === MULTI_VALUED ? COLORS.mutedBlue : stroke,\n          strokeDasharray,\n        }}\n      />\n    ),\n    value,\n  }));\n\nexport const LineShapeSelector = props => {\n  return <LineSelector {...props} computeOptions={computeOptions.bind(null, strokeShapes)} />;\n};\n\nexport const LineDashSelector = props => {\n  return (\n    <LineSelector\n      {...props}\n      computeOptions={lineColor =>\n        computeOptions(strokeDashes, lineColor).concat([\n          {\n            label: '',\n            value: null,\n          },\n        ])\n      }\n    />\n  );\n};\n\nclass LineSelector extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.setLocals(props, context);\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this.setLocals(nextProps, nextContext);\n  }\n\n  setLocals(nextProps, nextContext) {\n    const {fullContainer} = nextContext;\n    const lineColor = nestedProperty(fullContainer, 'line.color').get();\n    if (!this.options || this.lineColor !== lineColor) {\n      this.options = this.props.computeOptions(lineColor);\n      this.lineColor = lineColor;\n    }\n  }\n\n  render() {\n    return (\n      <Dropdown\n        {...this.props}\n        options={this.options}\n        valueRenderer={styledRenderer}\n        optionRenderer={styledRenderer}\n        backgroundDark={tooLight(this.lineColor)}\n      />\n    );\n  }\n}\n\nLineSelector.propTypes = {\n  computeOptions: PropTypes.func,\n  ...Dropdown.propTypes,\n};\n\nLineSelector.defaultProps = {\n  clearable: false,\n};\n\nLineSelector.contextTypes = {\n  fullContainer: PropTypes.object,\n};\n"]}