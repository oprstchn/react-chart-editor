{"version":3,"sources":["../../../src/components/fields/ErrorBars.js"],"names":["ErrorBars","props","context","updatePlot","bind","value","fullValue","visible","symmetric","mode","_","localize","getMode","label","showCustomDataControl","type","styleAttrs","attr","renderModeSelector","renderErrorBarControls","Component","propTypes","PropTypes","string","object","func","contextType","EditorControlsContext"],"mappings":"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","file":"ErrorBars.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React, {Component, Fragment} from 'react';\nimport {DataSelector, Radio, Numeric, MultiColorPicker} from '../index';\nimport RadioBlocks from '../widgets/RadioBlocks';\nimport Field from './Field';\nimport {connectToContainer} from 'lib';\nimport {EditorControlsContext} from '../../context';\n\nclass ErrorBars extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.updatePlot = this.updatePlot.bind(this);\n  }\n\n  updatePlot(value) {\n    if (value === 'symmetric') {\n      this.props.updatePlot({\n        ...this.props.fullValue,\n        visible: true,\n        symmetric: true,\n      });\n    }\n\n    if (value === 'asymmetric') {\n      this.props.updatePlot({\n        ...this.props.fullValue,\n        visible: true,\n        symmetric: false,\n      });\n    }\n\n    if (value === 'hidden') {\n      this.props.updatePlot({\n        ...this.props.fullValue,\n        visible: false,\n      });\n    }\n  }\n\n  getMode() {\n    let mode;\n\n    if (!this.props.fullValue.visible) {\n      mode = 'hidden';\n    }\n\n    if (\n      this.props.fullValue.visible &&\n      (this.props.fullValue.symmetric || typeof this.props.fullValue.symmetric === 'undefined')\n    ) {\n      // when this.props.fullValue.type === 'sqrt',\n      // then this.props.fullValue.symmetric is undefined, but 'sqrt' is only\n      // applicable when we want symmetric error bars\n      // https://github.com/plotly/plotly.js/issues/2359\n      mode = 'symmetric';\n    }\n\n    if (this.props.fullValue.visible && this.props.fullValue.symmetric === false) {\n      // it has to be explicitly set to false, because we don't want it to catch\n      // cases when it's undefined\n      mode = 'asymmetric';\n    }\n\n    return mode;\n  }\n\n  renderModeSelector() {\n    const {localize: _} = this.context;\n\n    return (\n      <Field>\n        <RadioBlocks\n          alignment=\"center\"\n          onOptionChange={this.updatePlot}\n          activeOption={this.getMode()}\n          options={[\n            {label: _('None'), value: 'hidden'},\n            {label: _('Symmetric'), value: 'symmetric'},\n            {label: _('Asymmetric'), value: 'asymmetric'},\n          ]}\n        />\n      </Field>\n    );\n  }\n\n  renderErrorBarControls() {\n    const {localize: _} = this.context;\n    const mode = this.getMode();\n    const showCustomDataControl = this.props.fullValue.type === 'data';\n\n    const styleAttrs = (\n      <Fragment>\n        <Radio\n          label={_('Copy Y Style')}\n          attr={`${this.props.attr}.copy_ystyle`}\n          options={[{label: _('Yes'), value: true}, {label: _('No'), value: false}]}\n        />\n        <Radio\n          label={_('Copy Z Style')}\n          attr={`${this.props.attr}.copy_zstyle`}\n          options={[{label: _('Yes'), value: true}, {label: _('No'), value: false}]}\n        />\n        <MultiColorPicker label={_('Color')} attr={`${this.props.attr}.color`} />\n        <Numeric label={_('Thickness')} attr={`${this.props.attr}.thickness`} />\n        <Numeric label={_('Crossbar Width')} attr={`${this.props.attr}.width`} />\n      </Fragment>\n    );\n\n    if (mode === 'symmetric') {\n      return (\n        <Fragment>\n          <Radio\n            label={_('Error Type')}\n            attr={`${this.props.attr}.type`}\n            options={[\n              {label: _('%'), value: 'percent'},\n              {label: _('Constant'), value: 'constant'},\n              {label: _('âˆš'), value: 'sqrt'},\n              {label: _('Data'), value: 'data'},\n            ]}\n          />\n          <Numeric label={_('Value')} attr={`${this.props.attr}.value`} />\n          {showCustomDataControl ? (\n            <DataSelector label={_('Custom Data')} attr={`${this.props.attr}.array`} />\n          ) : null}\n          {styleAttrs}\n        </Fragment>\n      );\n    }\n\n    if (mode === 'asymmetric') {\n      return (\n        <Fragment>\n          <Radio\n            label={_('Error Type')}\n            attr={`${this.props.attr}.type`}\n            options={[\n              {label: _('%'), value: 'percent'},\n              {label: _('Constant'), value: 'constant'},\n              {label: _('Data'), value: 'data'},\n            ]}\n          />\n          <Numeric label={_('Value')} attr={`${this.props.attr}.value`} />\n          <Numeric label={_('Value (-)')} attr={`${this.props.attr}.valueminus`} />\n          {showCustomDataControl ? (\n            <Fragment>\n              <DataSelector label={_('Error (+)')} attr={`${this.props.attr}.array`} />\n              <DataSelector label={_('Error (-)')} attr={`${this.props.attr}.arrayminus`} />\n            </Fragment>\n          ) : null}\n          {styleAttrs}\n        </Fragment>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <Fragment>\n        Field\n        {this.renderModeSelector()}\n        {this.renderErrorBarControls()}\n      </Fragment>\n    );\n  }\n}\n\nErrorBars.propTypes = {\n  attr: PropTypes.string,\n  fullValue: PropTypes.object,\n  updatePlot: PropTypes.func,\n};\n\nErrorBars.contextType = EditorControlsContext;\n\nexport default connectToContainer(ErrorBars);\n"]}