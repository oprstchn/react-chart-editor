{"version":3,"sources":["../../../../src/components/widgets/text_editors/LaTeX.js"],"names":["LaTeX","props","unwrappedValue","unwrap","value","state","onChange","bind","onBlur","nextProps","unwrappedNextValue","setState","substr","length","e","target","wrap","className","editorClassNames","placeholder","TextArea","propTypes","PropTypes","string","func","isRequired","defaultProps"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;;;IAEqBA,K;;;AACnB,iBAAYC,KAAZ,EAAmB;AAAA;;AAGjB;AACA;AAJiB,8GACXA,KADW;;AAKjB,QAAMC,iBAAiB,MAAKC,MAAL,CAAYF,MAAMG,KAAlB,CAAvB;;AAEA,UAAKC,KAAL,GAAa;AACXD,aAAOF;AADI,KAAb;AAGA,UAAKI,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,OAAhB;AACA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYD,IAAZ,OAAd;AAXiB;AAYlB;;;;8CAEyBE,S,EAAW;AACnC,UAAMC,qBAAqB,KAAKP,MAAL,CAAYM,UAAUL,KAAtB,CAA3B;;AAEA,UAAIM,uBAAuB,KAAKL,KAAL,CAAWD,KAAtC,EAA6C;AAC3C,aAAKO,QAAL,CAAc;AACZP,iBAAOM;AADK,SAAd;AAGD;AACF;;AAED;;;;2BACON,K,EAAO;AACZ,UAAI,iCAAUA,KAAV,CAAJ,EAAsB;AACpB,eAAOA,MAAMQ,MAAN,CAAa,CAAb,EAAgBR,MAAMS,MAAN,GAAe,CAA/B,CAAP;AACD;;AAED,aAAOT,KAAP;AACD;;AAED;;;;yBACKA,K,EAAO;AACV,UAAI,CAAC,iCAAUA,KAAV,CAAL,EAAuB;AACrB,qBAAWA,KAAX;AACD;;AAED,aAAOA,KAAP;AACD;;;6BAEQU,C,EAAG;AACV,WAAKH,QAAL,CAAc;AACZP,eAAOU,EAAEC,MAAF,CAASX;AADJ,OAAd;AAGD;;;2BAEMU,C,EAAG;AACR,UAAMV,QAAQ,KAAKY,IAAL,CAAUF,EAAEC,MAAF,CAASX,KAAnB,CAAd;AACA,WAAKH,KAAL,CAAWK,QAAX,CAAoBF,KAApB;AACD;;;6BAEQ;AAAA,UACAa,SADA,GACa,KAAKhB,KADlB,CACAgB,SADA;;AAEP,UAAMC,mBAAmBD,YAAYA,SAAZ,GAAwB,oBAAjD;AACA,aACE;AACE,eAAO,KAAKZ,KAAL,CAAWD,KADpB;AAEE,qBAAa,KAAKH,KAAL,CAAWkB,WAF1B;AAGE,kBAAU,KAAKb,QAHjB;AAIE,gBAAQ,KAAKE,MAJf;AAKE,mBAAWU;AALb,QADF;AASD;;;;EAlEgCE,kB;;kBAAdpB,K;;;AAqErBA,MAAMqB,SAAN,GAAkB;AAChBJ,aAAWK,oBAAUC,MADL;AAEhBjB,YAAUgB,oBAAUE,IAAV,CAAeC,UAFT;AAGhBN,eAAaG,oBAAUC,MAHP;AAIhBnB,SAAOkB,oBAAUC;AAJD,CAAlB;;AAOAvB,MAAM0B,YAAN,GAAqB;AACnBtB,SAAO,EADY;AAEnBe,eAAa;AAFM,CAArB","file":"LaTeX.js","sourcesContent":["import React from 'react';\nimport TextArea from '../TextArea';\nimport PropTypes from 'prop-types';\n\nimport {isLaTeXExpr as isWrapped} from './convertFormats';\n\nexport default class LaTeX extends TextArea {\n  constructor(props) {\n    super(props);\n\n    // Internally, represesent the LaTeX document without the\n    // wrapping `$...$` characters.\n    const unwrappedValue = this.unwrap(props.value);\n\n    this.state = {\n      value: unwrappedValue,\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const unwrappedNextValue = this.unwrap(nextProps.value);\n\n    if (unwrappedNextValue !== this.state.value) {\n      this.setState({\n        value: unwrappedNextValue,\n      });\n    }\n  }\n\n  // Return a new value with wrapping `$...$` removed.\n  unwrap(value) {\n    if (isWrapped(value)) {\n      return value.substr(1, value.length - 2);\n    }\n\n    return value;\n  }\n\n  // Wrap value in `$...$`.\n  wrap(value) {\n    if (!isWrapped(value)) {\n      return `$${value}$`;\n    }\n\n    return value;\n  }\n\n  onChange(e) {\n    this.setState({\n      value: e.target.value,\n    });\n  }\n\n  onBlur(e) {\n    const value = this.wrap(e.target.value);\n    this.props.onChange(value);\n  }\n\n  render() {\n    const {className} = this.props;\n    const editorClassNames = className ? className : 'text-editor__latex';\n    return (\n      <textarea\n        value={this.state.value}\n        placeholder={this.props.placeholder}\n        onChange={this.onChange}\n        onBlur={this.onBlur}\n        className={editorClassNames}\n      />\n    );\n  }\n}\n\nLaTeX.propTypes = {\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.string,\n  value: PropTypes.string,\n};\n\nLaTeX.defaultProps = {\n  value: '',\n  placeholder: '',\n};\n"]}