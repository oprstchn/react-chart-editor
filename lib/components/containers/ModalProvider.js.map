{"version":3,"sources":["../../../src/components/containers/ModalProvider.js"],"names":["ModalProvider","props","state","component","componentProps","open","isAnimatingOut","body","document","hasClass","classList","contains","add","remove","_","context","localize","Error","setState","animationDuration","setTimeout","closeModal","openModal","c","p","handleClose","Component","provideValue","children","React","propTypes","PropTypes","node","contextTypes","func","childContextTypes","bool"],"mappings":"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","file":"ModalProvider.js","sourcesContent":["import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {ModalProviderContext} from '../../context';\n\nclass ModalProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      component: null,\n      componentProps: {},\n      open: false,\n      isAnimatingOut: false,\n    };\n  }\n\n  componentDidUpdate() {\n    const body = document.body;\n    const {open} = this.state;\n\n    // Toggle scroll on document body if modal is open\n    const hasClass = body.classList.contains('no-scroll');\n\n    if (open && !hasClass) {\n      body.classList.add('no-scroll');\n    }\n    if (!open && hasClass) {\n      body.classList.remove('no-scroll');\n    }\n  }\n\n  openModal(component, componentProps) {\n    const {localize: _} = this.context;\n    if (!component) {\n      throw Error(_('You need to provide a component for the modal to open!'));\n    }\n    const {open} = this.state;\n\n    if (!open) {\n      this.setState({\n        component: component,\n        componentProps: componentProps,\n        open: true,\n      });\n    }\n  }\n\n  closeModal() {\n    const {open} = this.state;\n    if (open) {\n      this.setState({\n        open: false,\n        component: null,\n      });\n    }\n  }\n  handleClose() {\n    this.setState({isAnimatingOut: true});\n    const animationDuration = 600;\n    setTimeout(() => {\n      this.setState({isAnimatingOut: false});\n      this.closeModal();\n    }, animationDuration);\n  }\n\n  getChildContext() {\n    return {\n      openModal: (c, p) => this.openModal(c, p),\n      closeModal: () => this.closeModal(),\n      handleClose: () => this.handleClose(),\n      isAnimatingOut: this.state.isAnimatingOut,\n    };\n  }\n\n  provideValue() {\n    return {\n      openModal: (c, p) => this.openModal(c, p),\n      closeModal: () => this.closeModal(),\n      handleClose: () => this.handleClose(),\n      isAnimatingOut: this.state.isAnimatingOut,\n    };\n  }\n\n  render() {\n    const {component: Component, componentProps, isAnimatingOut} = this.state;\n    return (\n      <ModalProviderContext.Provider value={this.provideValue()}>\n        <Fragment>\n          {this.props.children}\n          {this.state.open ? (\n            <Component isAnimatingOut={isAnimatingOut} {...componentProps} />\n          ) : null}\n        </Fragment>\n      </ModalProviderContext.Provider>\n    );\n  }\n}\n\nModalProvider.propTypes = {\n  children: PropTypes.node,\n};\nModalProvider.contextTypes = {\n  localize: PropTypes.func,\n};\nModalProvider.childContextTypes = {\n  openModal: PropTypes.func,\n  closeModal: PropTypes.func,\n  handleClose: PropTypes.func,\n  isAnimatingOut: PropTypes.bool,\n};\n\nexport default ModalProvider;\n"]}