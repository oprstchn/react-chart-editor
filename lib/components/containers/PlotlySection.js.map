{"version":3,"sources":["../../../src/components/containers/PlotlySection.js"],"names":["Section","sectionVisible","props","name","children","Component","plotly_editor_traits","no_visibility_forcing","propTypes","PropTypes","node","string","attr","PlotlySection","context","determineVisibility","nextProps","nextContext","isVisible","Boolean","React","Children","forEach","child","plotProps","type","modifyPlotProps","contextTypes","containerConnectedContextTypes"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;IAEaA,O,WAAAA,O;;;AACX,qBAAc;AAAA;;AAAA;;AAEZ,UAAKC,cAAL,GAAsB,IAAtB;AAFY;AAGb;;;;6BAEQ;AACP,UAAI,CAAC,KAAKA,cAAV,EAA0B;AACxB,eAAO,IAAP;AACD;;AAED,aACE;AAAA;AAAA,UAAK,WAAU,SAAf;AACG,aAAKC,KAAL,CAAWC,IAAX,GACC;AAAA;AAAA,YAAK,WAAU,kBAAf;AACE;AAAA;AAAA,cAAK,WAAU,wBAAf;AAAyC,iBAAKD,KAAL,CAAWC;AAApD;AADF,SADD,GAIG,IALN;AAMG,aAAKD,KAAL,CAAWE;AANd,OADF;AAUD;;;;EArB0BC,gB;;AAwB7BL,QAAQM,oBAAR,GAA+B,EAACC,uBAAuB,KAAxB,EAA/B;AACAP,QAAQQ,SAAR,GAAoB;AAClBJ,YAAUK,oBAAUC,IADF;AAElBP,QAAMM,oBAAUE,MAFE;AAGlBC,QAAMH,oBAAUE;AAHE,CAApB;;IAMqBE,a;;;AACnB,yBAAYX,KAAZ,EAAmBY,OAAnB,EAA4B;AAAA;;AAAA,+HACpBZ,KADoB,EACbY,OADa;;AAE1B,WAAKC,mBAAL,CAAyBb,KAAzB,EAAgCY,OAAhC;AAF0B;AAG3B;;;;8CAEyBE,S,EAAWC,W,EAAa;AAChD,WAAKF,mBAAL,CAAyBC,SAAzB,EAAoCC,WAApC;AACD;;;wCAEmBD,S,EAAWC,W,EAAa;AAAA;;AAAA,6BACtB,0BAAgBD,SAAhB,EAA2BC,WAA3B,CADsB;AAAA,UACnCC,SADmC,oBACnCA,SADmC;;AAE1C,WAAKjB,cAAL,GAAsBkB,QAAQD,SAAR,CAAtB;;AAEAE,sBAAMC,QAAN,CAAeC,OAAf,CAAuBN,UAAUZ,QAAjC,EAA2C,iBAAS;AAClD,YAAI,CAACmB,KAAD,IAAU,OAAKtB,cAAnB,EAAmC;AACjC;AACD;;AAED,YAAIsB,MAAMrB,KAAN,CAAYU,IAAhB,EAAsB;AACpB,cAAMY,YAAY,0BAAgBD,MAAMrB,KAAtB,EAA6Be,WAA7B,CAAlB;AACA,cAAIM,MAAME,IAAN,CAAWC,eAAf,EAAgC;AAC9BH,kBAAME,IAAN,CAAWC,eAAX,CAA2BH,MAAMrB,KAAjC,EAAwCe,WAAxC,EAAqDO,SAArD;AACD;AACD,iBAAKvB,cAAL,GAAsB,OAAKA,cAAL,IAAuBuB,UAAUN,SAAvD;AACA;AACD;;AAED,YAAI,CAAC,CAACK,MAAME,IAAN,CAAWnB,oBAAX,IAAmC,EAApC,EAAwCC,qBAA7C,EAAoE;AAClE;AACA,iBAAKN,cAAL,GAAsB,IAAtB;AACA;AACD;AACF,OAnBD;AAoBD;;;;EAlCwCD,O;;kBAAtBa,a;;;AAqCrBA,cAAcP,oBAAd,GAAqC,EAACC,uBAAuB,IAAxB,EAArC;AACAM,cAAcc,YAAd,GAA6BC,mCAA7B","file":"PlotlySection.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {containerConnectedContextTypes, unpackPlotProps} from '../../lib';\n\nexport class Section extends Component {\n  constructor() {\n    super();\n    this.sectionVisible = true;\n  }\n\n  render() {\n    if (!this.sectionVisible) {\n      return null;\n    }\n\n    return (\n      <div className=\"section\">\n        {this.props.name ? (\n          <div className=\"section__heading\">\n            <div className=\"section__heading__text\">{this.props.name}</div>\n          </div>\n        ) : null}\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nSection.plotly_editor_traits = {no_visibility_forcing: false};\nSection.propTypes = {\n  children: PropTypes.node,\n  name: PropTypes.string,\n  attr: PropTypes.string,\n};\n\nexport default class PlotlySection extends Section {\n  constructor(props, context) {\n    super(props, context);\n    this.determineVisibility(props, context);\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this.determineVisibility(nextProps, nextContext);\n  }\n\n  determineVisibility(nextProps, nextContext) {\n    const {isVisible} = unpackPlotProps(nextProps, nextContext);\n    this.sectionVisible = Boolean(isVisible);\n\n    React.Children.forEach(nextProps.children, child => {\n      if (!child || this.sectionVisible) {\n        return;\n      }\n\n      if (child.props.attr) {\n        const plotProps = unpackPlotProps(child.props, nextContext);\n        if (child.type.modifyPlotProps) {\n          child.type.modifyPlotProps(child.props, nextContext, plotProps);\n        }\n        this.sectionVisible = this.sectionVisible || plotProps.isVisible;\n        return;\n      }\n\n      if (!(child.type.plotly_editor_traits || {}).no_visibility_forcing) {\n        // non-attr components force visibility (unless they don't via traits)\n        this.sectionVisible = true;\n        return;\n      }\n    });\n  }\n}\n\nPlotlySection.plotly_editor_traits = {no_visibility_forcing: true};\nPlotlySection.contextTypes = containerConnectedContextTypes;\n"]}