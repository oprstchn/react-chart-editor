{"version":3,"sources":["../../src/lib/connectSliderToLayout.js"],"names":["connectSliderToLayout","WrappedComponent","SliderConnectedComponent","props","context","updateSlider","bind","setLocals","nextProps","nextContext","sliderIndex","container","fullContainer","sliders","fullSliders","getValObject","attr","updateContainer","update","newUpdate","key","newkey","Component","displayName","propTypes","PropTypes","number","isRequired","contextTypes","object","onUpdate","func","childContextTypes","plotly_editor_traits"],"mappings":"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","file":"connectSliderToLayout.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {getDisplayName} from '../lib';\n\nexport default function connectSliderToLayout(WrappedComponent) {\n  class SliderConnectedComponent extends Component {\n    constructor(props, context) {\n      super(props, context);\n      this.updateSlider = this.updateSlider.bind(this);\n      this.setLocals(props, context);\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      const {sliderIndex} = props;\n      const {container, fullContainer} = context;\n\n      const sliders = container.sliders || [];\n      const fullSliders = fullContainer.sliders || [];\n      this.container = sliders[sliderIndex];\n      this.fullContainer = fullSliders[sliderIndex];\n    }\n\n    getChildContext() {\n      return {\n        getValObject: attr =>\n          !this.context.getValObject ? null : this.context.getValObject(`sliders[].${attr}`),\n        updateContainer: this.updateSlider,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    provideValue() {\n      return {\n        getValObject: attr =>\n          !this.context.getValObject ? null : this.context.getValObject(`sliders[].${attr}`),\n        updateContainer: this.updateSlider,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    updateSlider(update) {\n      const newUpdate = {};\n      const {sliderIndex} = this.props;\n      for (const key in update) {\n        const newkey = `sliders[${sliderIndex}].${key}`;\n        newUpdate[newkey] = update[key];\n      }\n      this.context.updateContainer(newUpdate);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  SliderConnectedComponent.displayName = `SliderConnected${getDisplayName(WrappedComponent)}`;\n\n  SliderConnectedComponent.propTypes = {\n    sliderIndex: PropTypes.number.isRequired,\n  };\n\n  SliderConnectedComponent.contextTypes = {\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    onUpdate: PropTypes.func,\n    updateContainer: PropTypes.func,\n    getValObject: PropTypes.func,\n  };\n\n  SliderConnectedComponent.childContextTypes = {\n    updateContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    getValObject: PropTypes.func,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  SliderConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return SliderConnectedComponent;\n}\n"]}