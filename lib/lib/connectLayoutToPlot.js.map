{"version":3,"sources":["../../src/lib/connectLayoutToPlot.js"],"names":["connectLayoutToPlot","WrappedComponent","LayoutConnectedComponent","context","layout","fullLayout","plotly","onUpdate","updateContainer","type","EDITOR_ACTIONS","UPDATE_LAYOUT","payload","update","getValObject","PlotSchema","getLayoutValObject","attr","parts","container","fullContainer","props","Component","displayName","contextTypes","PropTypes","object","func","childContextTypes","plotly_editor_traits"],"mappings":";;;;;;;;kBAMwBA,mB;;AANxB;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;;;;;AAEe,SAASA,mBAAT,CAA6BC,gBAA7B,EAA+C;AAAA,MACtDC,wBADsD;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,wCAExC;AAAA,uBAC+B,KAAKC,OADpC;AAAA,YACTC,MADS,YACTA,MADS;AAAA,YACDC,UADC,YACDA,UADC;AAAA,YACWC,MADX,YACWA,MADX;AAAA,YACmBC,QADnB,YACmBA,QADnB;;;AAGhB,YAAMC,kBAAkB,SAAlBA,eAAkB,SAAU;AAChC,cAAI,CAACD,QAAL,EAAe;AACb;AACD;AACDA,mBAAS;AACPE,kBAAMC,0BAAeC,aADd;AAEPC,qBAAS;AACPC;AADO;AAFF,WAAT;AAMD,SAVD;;AAYA,eAAO;AACLC,wBAAc;AAAA,mBACZ,CAACR,MAAD,GACI,IADJ,GAEIA,OAAOS,UAAP,CAAkBC,kBAAlB,CAAqCX,UAArC,EAAiD,+BAAe,EAAf,EAAmBY,IAAnB,EAAyBC,KAA1E,CAHQ;AAAA,WADT;AAKLV,0CALK;AAMLW,qBAAWf,MANN;AAOLgB,yBAAef;AAPV,SAAP;AASD;AA1ByD;AAAA;AAAA,qCA4B3C;AAAA,wBACkC,KAAKF,OADvC;AAAA,YACNC,MADM,aACNA,MADM;AAAA,YACEC,UADF,aACEA,UADF;AAAA,YACcC,MADd,aACcA,MADd;AAAA,YACsBC,QADtB,aACsBA,QADtB;;;AAGb,YAAMC,kBAAkB,SAAlBA,eAAkB,SAAU;AAChC,cAAI,CAACD,QAAL,EAAe;AACb;AACD;AACDA,mBAAS;AACPE,kBAAMC,0BAAeC,aADd;AAEPC,qBAAS;AACPC;AADO;AAFF,WAAT;AAMD,SAVD;;AAYA,eAAO;AACLC,wBAAc;AAAA,mBACZ,CAACR,MAAD,GACI,IADJ,GAEIA,OAAOS,UAAP,CAAkBC,kBAAlB,CAAqCX,UAArC,EAAiD,+BAAe,EAAf,EAAmBY,IAAnB,EAAyBC,KAA1E,CAHQ;AAAA,WADT;AAKLV,0CALK;AAMLW,qBAAWf,MANN;AAOLgB,yBAAef;AAPV,SAAP;AASD;AApDyD;AAAA;AAAA,+BAsDjD;AACP,eAAO,8BAAC,gBAAD,EAAsB,KAAKgB,KAA3B,CAAP;AACD;AAxDyD;;AAAA;AAAA,IACrBC,gBADqB;;AA2D5DpB,2BAAyBqB,WAAzB,uBAAyD,yBAAetB,gBAAf,CAAzD;;AAEAC,2BAAyBsB,YAAzB,GAAwC;AACtCpB,YAAQqB,oBAAUC,MADoB;AAEtCrB,gBAAYoB,oBAAUC,MAFgB;AAGtCpB,YAAQmB,oBAAUC,MAHoB;AAItCnB,cAAUkB,oBAAUE;AAJkB,GAAxC;;AAOAzB,2BAAyB0B,iBAAzB,GAA6C;AAC3Cd,kBAAcW,oBAAUE,IADmB;AAE3CnB,qBAAiBiB,oBAAUE,IAFgB;AAG3CR,eAAWM,oBAAUC,MAHsB;AAI3CN,mBAAeK,oBAAUC;AAJkB,GAA7C;;AApE4D,MA2ErDG,oBA3EqD,GA2E7B5B,gBA3E6B,CA2ErD4B,oBA3EqD;;AA4E5D3B,2BAAyB2B,oBAAzB,GAAgDA,oBAAhD;;AAEA,SAAO3B,wBAAP;AACD","file":"connectLayoutToPlot.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport nestedProperty from 'plotly.js/src/lib/nested_property';\nimport {getDisplayName} from '../lib';\nimport {EDITOR_ACTIONS} from './constants';\n\nexport default function connectLayoutToPlot(WrappedComponent) {\n  class LayoutConnectedComponent extends Component {\n    getChildContext() {\n      const {layout, fullLayout, plotly, onUpdate} = this.context;\n\n      const updateContainer = update => {\n        if (!onUpdate) {\n          return;\n        }\n        onUpdate({\n          type: EDITOR_ACTIONS.UPDATE_LAYOUT,\n          payload: {\n            update,\n          },\n        });\n      };\n\n      return {\n        getValObject: attr =>\n          !plotly\n            ? null\n            : plotly.PlotSchema.getLayoutValObject(fullLayout, nestedProperty({}, attr).parts),\n        updateContainer,\n        container: layout,\n        fullContainer: fullLayout,\n      };\n    }\n\n    provideValue() {\n      const {layout, fullLayout, plotly, onUpdate} = this.context;\n\n      const updateContainer = update => {\n        if (!onUpdate) {\n          return;\n        }\n        onUpdate({\n          type: EDITOR_ACTIONS.UPDATE_LAYOUT,\n          payload: {\n            update,\n          },\n        });\n      };\n\n      return {\n        getValObject: attr =>\n          !plotly\n            ? null\n            : plotly.PlotSchema.getLayoutValObject(fullLayout, nestedProperty({}, attr).parts),\n        updateContainer,\n        container: layout,\n        fullContainer: fullLayout,\n      };\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  LayoutConnectedComponent.displayName = `LayoutConnected${getDisplayName(WrappedComponent)}`;\n\n  LayoutConnectedComponent.contextTypes = {\n    layout: PropTypes.object,\n    fullLayout: PropTypes.object,\n    plotly: PropTypes.object,\n    onUpdate: PropTypes.func,\n  };\n\n  LayoutConnectedComponent.childContextTypes = {\n    getValObject: PropTypes.func,\n    updateContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  LayoutConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return LayoutConnectedComponent;\n}\n"]}