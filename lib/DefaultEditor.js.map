{"version":3,"sources":["../src/DefaultEditor.js"],"names":["DefaultEditor","props","context","hasTransforms","bind","hasAxes","hasMenus","hasSliders","hasColorbars","fullData","some","TRANSFORMABLE_TRACES","includes","d","type","Object","keys","fullLayout","_subplots","filter","length","updatemenus","layout","sliders","_","localize","logo","logoSrc","menuPanelOrder","children","Component","propTypes","PropTypes","node","string","array","contextType","EditorControlsContext"],"mappings":"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","file":"DefaultEditor.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {PanelMenuWrapper} from './components';\nimport {\n  GraphCreatePanel,\n  GraphTransformsPanel,\n  GraphSubplotsPanel,\n  StyleLayoutPanel,\n  StyleAxesPanel,\n  StyleLegendPanel,\n  StyleNotesPanel,\n  StyleShapesPanel,\n  StyleSlidersPanel,\n  StyleImagesPanel,\n  StyleTracesPanel,\n  StyleColorbarsPanel,\n  StyleUpdateMenusPanel,\n} from './default_panels';\nimport {traceHasColorbar} from './default_panels/StyleColorbarsPanel';\nimport Logo from './components/widgets/Logo';\nimport {TRANSFORMABLE_TRACES} from './lib/constants';\nimport {EditorControlsContext} from './context';\n\nclass DefaultEditor extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.hasTransforms = this.hasTransforms.bind(this);\n    this.hasAxes = this.hasAxes.bind(this);\n    this.hasMenus = this.hasMenus.bind(this);\n    this.hasSliders = this.hasSliders.bind(this);\n    this.hasColorbars = this.hasColorbars.bind(this);\n  }\n\n  hasTransforms() {\n    return this.context.fullData.some(d => TRANSFORMABLE_TRACES.includes(d.type));\n  }\n\n  hasAxes() {\n    return (\n      Object.keys(this.context.fullLayout._subplots).filter(\n        type =>\n          !['cartesian', 'mapbox'].includes(type) &&\n          this.context.fullLayout._subplots[type].length > 0\n      ).length > 0\n    );\n  }\n\n  hasMenus() {\n    const {\n      fullLayout: {updatemenus = []},\n    } = this.context;\n\n    return updatemenus.length > 0;\n  }\n\n  hasSliders() {\n    const {\n      layout: {sliders = []},\n    } = this.context;\n\n    return sliders.length > 0;\n  }\n\n  hasColorbars() {\n    return this.context.fullData.some(d => traceHasColorbar({}, d));\n  }\n\n  render() {\n    const _ = this.context.localize;\n    const logo = this.props.logoSrc && <Logo src={this.props.logoSrc} />;\n\n    return (\n      <PanelMenuWrapper menuPanelOrder={this.props.menuPanelOrder}>\n        {logo ? logo : null}\n        <GraphCreatePanel group={_('Structure')} name={_('Traces')} />\n        <GraphSubplotsPanel group={_('Structure')} name={_('Subplots')} />\n        {this.hasTransforms() && (\n          <GraphTransformsPanel group={_('Structure')} name={_('Transforms')} />\n        )}\n        <StyleLayoutPanel group={_('Style')} name={_('General')} />\n        <StyleTracesPanel group={_('Style')} name={_('Traces')} />\n        {this.hasAxes() && <StyleAxesPanel group={_('Style')} name={_('Axes')} />}\n        <StyleLegendPanel group={_('Style')} name={_('Legend')} />\n        {this.hasColorbars() && <StyleColorbarsPanel group={_('Style')} name={_('Color Bars')} />}\n        <StyleNotesPanel group={_('Style')} name={_('Annotation')} />\n        <StyleShapesPanel group={_('Style')} name={_('Shapes')} />\n        <StyleImagesPanel group={_('Style')} name={_('Images')} />\n        {this.hasSliders() && <StyleSlidersPanel group={_('Style')} name={_('Sliders')} />}\n        {this.hasMenus() && <StyleUpdateMenusPanel group={_('Style')} name={_('Menus')} />}\n        {this.props.children ? this.props.children : null}\n      </PanelMenuWrapper>\n    );\n  }\n}\n\nDefaultEditor.propTypes = {\n  children: PropTypes.node,\n  logoSrc: PropTypes.string,\n  menuPanelOrder: PropTypes.array,\n};\n\nDefaultEditor.contextType = EditorControlsContext;\n\nexport default DefaultEditor;\n"]}