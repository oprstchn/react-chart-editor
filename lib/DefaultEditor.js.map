{"version":3,"sources":["../src/DefaultEditor.js"],"names":["DefaultEditor","props","hasTransforms","bind","hasAxes","hasMenus","hasSliders","hasColorbars","fullData","some","TRANSFORMABLE_TRACES","includes","d","type","fullLayout","Object","keys","_subplots","filter","length","updatemenus","layout","sliders","logo","logoSrc","_","localize","menuPanelOrder","children","Component","propTypes","PropTypes","node","string","array"],"mappings":"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","file":"DefaultEditor.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {PanelMenuWrapper} from './components';\nimport {\n  GraphCreatePanel,\n  GraphTransformsPanel,\n  GraphSubplotsPanel,\n  StyleLayoutPanel,\n  StyleAxesPanel,\n  StyleLegendPanel,\n  StyleNotesPanel,\n  StyleShapesPanel,\n  StyleSlidersPanel,\n  StyleImagesPanel,\n  StyleTracesPanel,\n  StyleColorbarsPanel,\n  StyleUpdateMenusPanel,\n} from './default_panels';\nimport {traceHasColorbar} from './default_panels/StyleColorbarsPanel';\nimport Logo from './components/widgets/Logo';\nimport {TRANSFORMABLE_TRACES} from './lib/constants';\nimport {EditorControlsContext} from './context';\n\nclass DefaultEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.hasTransforms = this.hasTransforms.bind(this);\n    this.hasAxes = this.hasAxes.bind(this);\n    this.hasMenus = this.hasMenus.bind(this);\n    this.hasSliders = this.hasSliders.bind(this);\n    this.hasColorbars = this.hasColorbars.bind(this);\n  }\n\n  hasTransforms(fullData) {\n    return fullData.some(d => TRANSFORMABLE_TRACES.includes(d.type));\n  }\n\n  hasAxes(fullLayout) {\n    return (\n      Object.keys(fullLayout._subplots).filter(\n        type => !['cartesian', 'mapbox'].includes(type) && fullLayout._subplots[type].length > 0\n      ).length > 0\n    );\n  }\n\n  hasMenus(fullLayout) {\n    const {updatemenus = []} = fullLayout;\n\n    return updatemenus.length > 0;\n  }\n\n  hasSliders(layout) {\n    const {sliders = []} = layout;\n    // const {\n    //   layout: {sliders = []},\n    // } = this.context;\n\n    return sliders.length > 0;\n  }\n\n  hasColorbars(fullData) {\n    return fullData.some(d => traceHasColorbar({}, d));\n  }\n\n  render() {\n    const logo = this.props.logoSrc && <Logo src={this.props.logoSrc} />;\n\n    return (\n      <EditorControlsContext.Consumer>\n        {({localize: _, fullData, fullLayout, layout}) => {\n          return (\n            <PanelMenuWrapper menuPanelOrder={this.props.menuPanelOrder}>\n              {logo ? logo : null}\n              <GraphCreatePanel group={_('Structure')} name={_('Traces')} />\n              <GraphSubplotsPanel group={_('Structure')} name={_('Subplots')} />\n              {this.hasTransforms(fullData) && (\n                <GraphTransformsPanel group={_('Structure')} name={_('Transforms')} />\n              )}\n              <StyleLayoutPanel group={_('Style')} name={_('General')} />\n              <StyleTracesPanel group={_('Style')} name={_('Traces')} />\n              {this.hasAxes(fullLayout) && <StyleAxesPanel group={_('Style')} name={_('Axes')} />}\n              <StyleLegendPanel group={_('Style')} name={_('Legend')} />\n              {this.hasColorbars(fullData) && (\n                <StyleColorbarsPanel group={_('Style')} name={_('Color Bars')} />\n              )}\n              <StyleNotesPanel group={_('Style')} name={_('Annotation')} />\n              <StyleShapesPanel group={_('Style')} name={_('Shapes')} />\n              <StyleImagesPanel group={_('Style')} name={_('Images')} />\n              {this.hasSliders(layout) && (\n                <StyleSlidersPanel group={_('Style')} name={_('Sliders')} />\n              )}\n              {this.hasMenus(fullLayout) && (\n                <StyleUpdateMenusPanel group={_('Style')} name={_('Menus')} />\n              )}\n              {this.props.children ? this.props.children : null}\n            </PanelMenuWrapper>\n          );\n        }}\n      </EditorControlsContext.Consumer>\n    );\n  }\n}\n\nDefaultEditor.propTypes = {\n  children: PropTypes.node,\n  logoSrc: PropTypes.string,\n  menuPanelOrder: PropTypes.array,\n};\n\n// DefaultEditor.contextType = EditorControlsContext;\n\nexport default DefaultEditor;\n"]}