{"version":3,"sources":["../../src/default_panels/GraphTransformsPanel.js"],"names":["AggregationSection","PlotlySection","Aggregations","context","fullContainer","aggregations","_","localize","length","filter","aggr","target","match","map","i","label","value","Component","plotly_editor_traits","no_visibility_forcing","contextTypes","PropTypes","object","func","GraphTransformsPanel","TRANSFORMABLE_TRACES","includes","t","type"],"mappings":"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","file":"GraphTransformsPanel.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Radio,\n  TransformAccordion,\n  TraceAccordion,\n  DataSelector,\n  Dropdown,\n  PlotlySection,\n  FilterOperation,\n  FilterValue,\n} from '../components';\nimport {connectAggregationToTransform} from '../lib';\nimport {TRANSFORMABLE_TRACES} from 'lib/constants';\n\nconst AggregationSection = connectAggregationToTransform(PlotlySection);\nimport {EditorControlsContext} from '../context';\n\nexport class Aggregations extends Component {\n  render() {\n    const {\n      fullContainer: {aggregations = []},\n    } = this.context;\n    const {localize: _} = this.context;\n    if (aggregations.length === 0) {\n      return null;\n    }\n\n    return (\n      <PlotlySection name={_('Aggregations')} attr=\"aggregations\">\n        {aggregations\n          .filter(aggr => aggr.target && aggr.target.match(/transforms\\[\\d*\\]\\./gi) === null)\n          .map(({target}, i) => (\n            <AggregationSection show key={i} aggregationIndex={i}>\n              <Dropdown\n                attr=\"func\"\n                label={target}\n                options={[\n                  {label: _('Count'), value: 'count'},\n                  {label: _('Sum'), value: 'sum'},\n                  {label: _('Average'), value: 'avg'},\n                  {label: _('Median'), value: 'median'},\n                  {label: _('Mode'), value: 'mode'},\n                  {label: _('RMS'), value: 'rms'},\n                  {label: _('Standard Deviation'), value: 'stddev'},\n                  {label: _('Min'), value: 'min'},\n                  {label: _('Max'), value: 'max'},\n                  {label: _('First'), value: 'first'},\n                  {label: _('Last'), value: 'last'},\n                  {label: _('Change'), value: 'change'},\n                  {label: _('Range'), value: 'range'},\n                ]}\n                clearable={false}\n              />\n            </AggregationSection>\n          ))}\n      </PlotlySection>\n    );\n  }\n}\n\nAggregations.plotly_editor_traits = {no_visibility_forcing: true};\nAggregations.contextTypes = {\n  fullContainer: PropTypes.object,\n  localize: PropTypes.func,\n};\n\nconst GraphTransformsPanel = () => {\n  return (\n    <EditorControlsContext.Consumer>\n      {({localize: _}) => (\n        <TraceAccordion traceFilterCondition={t => TRANSFORMABLE_TRACES.includes(t.type)}>\n          <TransformAccordion>\n            <Radio\n              attr=\"enabled\"\n              options={[{label: _('Enabled'), value: true}, {label: _('Disabled'), value: false}]}\n            />\n\n            <DataSelector label={_('By')} attr=\"groups\" />\n\n            <DataSelector label={_('Target')} attr=\"target\" />\n            <FilterOperation label={_('Operator')} attr=\"operation\" />\n            <FilterValue label={_('Value')} attr=\"value\" />\n\n            <Radio\n              attr=\"order\"\n              options={[\n                {label: _('Ascending'), value: 'ascending'},\n                {label: _('Descending'), value: 'descending'},\n              ]}\n            />\n\n            <Aggregations />\n          </TransformAccordion>\n        </TraceAccordion>\n      )}\n    </EditorControlsContext.Consumer>\n  );\n};\n\n// GraphTransformsPanel.contextTypes = {\n//   localize: PropTypes.func,\n// };\n\nexport default GraphTransformsPanel;\n"]}