{"version":3,"sources":["../src/PlotlyEditor.js"],"names":["PlotlyEditor","props","state","graphDiv","PlotComponent","plotly","handleRender","bind","fig","setState","onRender","data","layout","_transitionData","_frames","hideControls","dataSources","dataSourceOptions","onUpdate","advancedTraceTypeSelector","locale","traceTypesConfig","dictionaries","showFieldTooltips","srcConverters","makeDefaultTrace","glByDefault","Boolean","config","mapboxAccessToken","fontOptions","chartHelp","children","width","height","frames","useResizeHandler","debug","divId","Component","propTypes","PropTypes","any","object","array","func","bool","string","shape","toSrc","isRequired","fromSrc","defaultProps","DEFAULT_FONTS"],"mappings":"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","file":"PlotlyEditor.js","sourcesContent":["import React, {Component} from 'react';\nimport createPlotComponent from 'react-plotly.js/factory';\nimport EditorControls from './EditorControls';\nimport PropTypes from 'prop-types';\nimport {DEFAULT_FONTS} from 'lib/constants';\n\nclass PlotlyEditor extends Component {\n  constructor(props) {\n    super();\n    this.state = {graphDiv: {}};\n    this.PlotComponent = createPlotComponent(props.plotly);\n    this.handleRender = this.handleRender.bind(this);\n  }\n\n  handleRender(fig, graphDiv) {\n    this.setState({graphDiv});\n    if (this.props.onRender) {\n      this.props.onRender(graphDiv.data, graphDiv.layout, graphDiv._transitionData._frames);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"plotly_editor\">\n        {!this.props.hideControls && (\n          <EditorControls\n            graphDiv={this.state.graphDiv}\n            dataSources={this.props.dataSources}\n            dataSourceOptions={this.props.dataSourceOptions}\n            plotly={this.props.plotly}\n            onUpdate={this.props.onUpdate}\n            advancedTraceTypeSelector={this.props.advancedTraceTypeSelector}\n            locale={this.props.locale}\n            traceTypesConfig={this.props.traceTypesConfig}\n            dictionaries={this.props.dictionaries}\n            showFieldTooltips={this.props.showFieldTooltips}\n            srcConverters={this.props.srcConverters}\n            makeDefaultTrace={this.props.makeDefaultTrace}\n            glByDefault={this.props.glByDefault}\n            mapBoxAccess={Boolean(this.props.config && this.props.config.mapboxAccessToken)}\n            fontOptions={this.props.fontOptions}\n            chartHelp={this.props.chartHelp}\n          >\n            {this.props.children}\n          </EditorControls>\n        )}\n        <div className=\"plotly_editor_plot\" style={{width: '100%', height: '100%'}}>\n          <this.PlotComponent\n            data={this.props.data}\n            layout={this.props.layout}\n            frames={this.props.frames}\n            config={this.props.config}\n            useResizeHandler={this.props.useResizeHandler}\n            debug={this.props.debug}\n            onInitialized={this.handleRender}\n            onUpdate={this.handleRender}\n            style={{width: '100%', height: '100%'}}\n            divId={this.props.divId}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nPlotlyEditor.propTypes = {\n  children: PropTypes.any,\n  layout: PropTypes.object,\n  data: PropTypes.array,\n  config: PropTypes.object,\n  dataSourceOptions: PropTypes.array,\n  dataSources: PropTypes.object,\n  frames: PropTypes.array,\n  onUpdate: PropTypes.func,\n  onRender: PropTypes.func,\n  plotly: PropTypes.object,\n  useResizeHandler: PropTypes.bool,\n  debug: PropTypes.bool,\n  advancedTraceTypeSelector: PropTypes.bool,\n  locale: PropTypes.string,\n  traceTypesConfig: PropTypes.object,\n  dictionaries: PropTypes.object,\n  divId: PropTypes.string,\n  hideControls: PropTypes.bool,\n  showFieldTooltips: PropTypes.bool,\n  srcConverters: PropTypes.shape({\n    toSrc: PropTypes.func.isRequired,\n    fromSrc: PropTypes.func.isRequired,\n  }),\n  makeDefaultTrace: PropTypes.func,\n  glByDefault: PropTypes.bool,\n  fontOptions: PropTypes.array,\n  chartHelp: PropTypes.object,\n};\n\nPlotlyEditor.defaultProps = {\n  hideControls: false,\n  showFieldTooltips: false,\n  fontOptions: DEFAULT_FONTS,\n};\n\nexport default PlotlyEditor;\n"]}